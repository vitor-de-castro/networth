<nav class="navbar">
  <div class="navbar-content">

    <%# Logo %>
    <a href="<%= root_path %>" class="navbar-logo">NetWorth</a>

    <%# Currency Selector %>
    <%= form_with url: update_currency_path, method: :patch, class: "currency-selector", data: { turbo: false } do |form| %>
      <%= form.select :currency,
                      User::CURRENCIES.map { |c| [c, c] },
                      { selected: current_user.currency || 'USD' },
                      {
                        class: "currency-dropdown",
                        onchange: "this.form.submit()"
                      } %>
    <% end %>

    <%# Desktop Navigation Links %>
    <div class="navbar-links">
      <a href="#assets" class="navbar-link">Assets</a>
      <a href="#charts" class="navbar-link">Charts</a>
      <a href="#ai-assistant" class="navbar-link">AI Assistant</a>
    </div>

    <%# Desktop Sign Out %>
    <div class="navbar-right">
      <%= link_to "Sign Out", destroy_user_session_path,
                  data: { turbo_method: :delete },
                  class: "navbar-signout desktop-only" %>

      <%# Mobile Hamburger %>
      <button class="navbar-mobile-toggle" onclick="toggleMobileMenu()">â˜°</button>
    </div>

  </div>

  <%# Mobile Menu %>
  <div class="navbar-mobile-menu" id="mobile-menu">
    <a href="#assets" class="navbar-link" onclick="toggleMobileMenu()">Assets</a>
    <a href="#charts" class="navbar-link" onclick="toggleMobileMenu()">Charts</a>
    <a href="#ai-assistant" class="navbar-link" onclick="toggleMobileMenu()">AI Assistant</a>
    <%= link_to "Sign Out", destroy_user_session_path,
                data: { turbo_method: :delete },
                class: "navbar-link" %>
  </div>
</nav>

<script>
  function toggleMobileMenu() {
    const menu = document.getElementById('mobile-menu');
    menu.classList.toggle('open');
  }
</script>
